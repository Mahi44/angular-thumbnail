<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no, width=device-width">

    <title>Angular Thumbnail</title>
  </head>
  <body ng-app="TestApp">
  
    <a href="https://github.com/kennyki/angular-thumbnail"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/365986a132ccd6a44c23a9169022c0b5c890c387/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f7265645f6161303030302e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png"></a>

    <div ng-controller="TestController">
      <h2>Original image</h2>
      <img ng-src="{{img.original}}">
      <hr>

      <h2>Thumbnail with overridden default settings (150x150)</h2>
      <ui-thumbnail src="img.original"></ui-thumbnail>
      <hr>

      <h2>Thumbnail with custom settings (50x50)</h2>
      <ui-thumbnail src="img.original" opts="settings"></ui-thumbnail>
      <h4>Change the custom settings</h4>
      Width: <input type="text" ng-model="settings.width">
      Height: <input type="text" ng-model="settings.height">
      <hr>

      <h2>Thumbnail with custom settings (50x50) but no scope binding (will not change)</h2>
      <ui-thumbnail src="'http://www.w3schools.com/angular/pic_angular.jpg'" opts="{width: 50, height: 50}"></ui-thumbnail>
      <hr>

      <h2>Change image</h2>
      <button ng-click="changeToOther()">Apply!</button>
      <hr>

      <h2>Client side thumbnail generation!!!!</h2>
      <button ng-click="getDataUrl()">Peek at data url</button>
      <button ng-click="getBlob()">Peek at blob</button>

    </div>

    <script src="bower_components/blueimp-canvas-to-blob/js/canvas-to-blob.min.js"></script>

    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.15/angular.min.js"></script>
    <script src="angular-thumbnail.js"></script>
    <script src="img/sample-base64.js"></script>

    <script>
      angular.module('TestApp', ['ui.thumbnail'])

      .config(function(ThumbnailServiceProvider) {
        // otherwise they're 100
        ThumbnailServiceProvider.defaults.width = 150;
        ThumbnailServiceProvider.defaults.height = 150;
      })

      .controller('TestController', function($scope, ThumbnailService) {
        $scope.img = {
          original: 'img/pic_angular.jpg',
          // this variable is defined in img/sample-base64.js
          other: sampleBase64
        };
        $scope.settings = {
          width: 50,
          height: 50
        };

        $scope.changeToOther = function changeToOther() {
          $scope.img.original = $scope.img.other;
        };

        $scope.getDataUrl = function getDataUrl() {
          ThumbnailService.generate($scope.img.original).then(
            function success(data) {
              alert(data.substring(0, 30));
            },
            function error(reason) {
              alert('Error: ' + reason);
            }
          );
        };

        $scope.getBlob = function getBlob() {
          ThumbnailService.generate($scope.img.original, {returnType: 'blob'}).then(
            function success(blob) {
              alert(typeof blob);
            },
            function error(reason) {
              alert('Error: ' + reason);
            }
          );
        };
      })

      ;
    </script>

  </body>
</html>
